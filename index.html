<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PaintBench 2.0 - Pro Painter</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        body { background-color: #f8f8f8; font-family: 'Inter', 'Noto Sans TC', sans-serif; overflow-x: hidden; }
        .brutal-card { border: 3px solid #000; transition: all 0.2s; }
        .concentric-circle { display: flex; align-items: center; justify-content: center; border-radius: 50%; border: 2px solid #000; transition: background-color 0.3s ease; }
        #preview-orb { width: 110px; height: 110px; border-radius: 50%; border: 4px solid #000; position: relative; margin: 0 auto; transition: all 0.3s; }
        .orb-original { box-shadow: none; }
        .orb-matt { box-shadow: inset -12px -12px 30px rgba(0,0,0,0.5), inset 8px 8px 15px rgba(255,255,255,0.2); }
        .orb-metallic { box-shadow: inset -8px -8px 25px rgba(0,0,0,0.8), inset 4px 4px 8px rgba(255,255,255,0.7); }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        #modal-overlay { display: none; position: absolute; inset: 0; background: rgba(0,0,0,0.85); z-index: 100; align-items: center; justify-content: center; padding: 20px; }
    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-4 text-black">

    <div id="app-container" class="w-[375px] h-[812px] bg-white brutal-card overflow-hidden flex flex-col relative border-[3px] border-black">
        
        <div id="modal-overlay">
            <div class="bg-white border-[4px] border-black p-6 w-full space-y-5">
                <h3 id="modal-title" class="font-black text-xl uppercase italic text-left">儲存專案</h3>
                <div class="space-y-2 text-left">
                    <p class="text-[10px] font-black uppercase">專案名稱 (不可重複)</p>
                    <input type="text" id="project-name-input" class="w-full p-3 border-2 border-black font-bold outline-none bg-gray-50 focus:bg-orange-50">
                </div>
                <div id="modal-buttons" class="space-y-2 pt-2"></div>
                <button onclick="closeModal()" class="w-full text-center text-xs font-bold underline py-2">取消</button>
            </div>
        </div>

        <div id="main-view" class="flex flex-col h-full">
            <header class="bg-black p-4 flex justify-between items-center shrink-0">
                <h1 class="text-2xl font-black italic text-white uppercase tracking-tighter">PAINTBENCH</h1>
                <button onclick="toggleLanguage()" class="bg-white text-black text-[10px] px-2 py-1 font-bold border-2 border-black rounded">繁中/EN</button>
            </header>

            <main class="p-4 space-y-6 overflow-y-auto flex-grow no-scrollbar bg-white">
                <section class="space-y-2">
                    <div class="flex justify-between items-end">
                        <h2 class="font-black text-sm" id="label-step1">一、 選擇色調</h2>
                        <label class="bg-black text-white text-[10px] px-2 py-1 cursor-pointer font-bold border border-black uppercase">PHOTO <input type="file" id="imageLoader" accept="image/*" class="hidden"></label>
                    </div>
                    <div class="w-full aspect-square brutal-card bg-slate-50 flex items-center justify-center overflow-hidden">
                        <img id="colorWheel" src="color_wheel.png" class="w-11/12 cursor-crosshair">
                    </div>
                </section>

                <div id="screenshot-area" class="bg-white p-2">
                    <section class="space-y-3 mb-6">
                        <h2 class="font-black text-sm text-left" id="label-effect">二、 塗裝效果</h2>
                        <div class="brutal-card p-4 bg-gray-50 text-center">
                            <div id="preview-orb" class="orb-original bg-gray-300"></div>
                            <div class="flex gap-1 mt-4">
                                <button onclick="setEffect('original')" class="flex-1 py-2 text-[9px] font-black border-2 border-black bg-black text-white uppercase">Original</button>
                                <button onclick="setEffect('matt')" class="flex-1 py-2 text-[9px] font-black border-2 border-black bg-black text-white uppercase">Matt</button>
                                <button onclick="setEffect('metallic')" class="flex-1 py-2 text-[9px] font-black border-2 border-black bg-black text-white uppercase">Metallic</button>
                            </div>
                            <div id="share-actions" class="hidden grid grid-cols-2 gap-1 mt-1">
                                <button onclick="takeScreenshot()" class="py-2 bg-black text-white text-[9px] font-black uppercase border-2 border-black">Screenshot</button>
                                <button onclick="copyShareLink()" class="py-2 bg-black text-white text-[9px] font-black uppercase border-2 border-black">Share Link</button>
                            </div>
                        </div>
                    </section>

                    <section class="space-y-4">
                        <div class="flex justify-between items-center">
                            <h2 class="font-black text-sm text-left" id="label-step2">三、 顏色列表</h2>
                            <button onclick="togglePaintBrand()" class="bg-black text-white text-[9px] px-3 py-1 font-bold border-2 border-black rounded uppercase" id="brand-toggle-btn">Citadel</button>
                        </div>
                        <div class="brutal-card p-6 bg-gray-50 flex items-center">
                            <div id="circle-base" class="w-24 h-24 concentric-circle shrink-0" style="background-color: #ddd;"> 
                                <div id="circle-layer" class="w-16 h-16 concentric-circle" style="background-color: #bbb;"> 
                                    <div id="circle-highlight" class="w-10 h-10 concentric-circle" style="background-color: #eee;"> 
                                        <div id="circle-shadow" class="w-5 h-5 concentric-circle" style="background-color: #999;"></div> 
                                    </div>
                                </div>
                            </div>
                            <div class="ml-auto space-y-4 w-32 text-left font-black">
                                <div class="flex flex-col"><span class="text-[8px] opacity-50" id="tag-base">BASE</span><span class="text-[10px] truncate" id="p-base">-</span></div>
                                <div class="flex flex-col"><span class="text-[8px] opacity-50" id="tag-layer">LAYER</span><span class="
